{% extends 'base.html' %} {% block content %}
<div class="container">
  <div class="banner"><img src="\static\img\banner.svg" alt=""></div>
  <div class="where_to_leave">어디로 떠날까요?</div>
  <div class="home_location_list">
    <div class="shift-btn-left">
      <img src="\static\img\left.svg" onclick="onClickHomeLeft()" alt="">
    </div>
      <div class="shift-locations">
        <div class="home_location"><a href="/cities/서울">서울</a></div>
        <div class="home_location"><a href="/cities/경기">경기</a></div>
        <div class="home_location"><a href="/cities/인천">인천</a></div>
        <div class="home_location"><a href="/cities/강원">강원</a></div>
        <div class="home_location"><a href="/cities/충북">충북</a></div>
        <div class="home_location"><a href="/cities/충남">충남</a></div>
      </div>
    <div class="shift-btn-right">
      <img src="\static\img\right.svg" onclick="onClickHomeRight()" alt="">
    </div>
  </div>
  <div id="num">0</div>
  <div class="page_dot"><img src="/static/img/page_1.svg" alt=""></div>
  <div class="home_best_container">
    <div>베스트 장소</div>
    <div class="home_best_list">
      <div class="shift-btn">
        <button onclick="onClickLeft()">&lt;</button>
      </div>
      <form action="" id="location-select">
        <div class="best_shift_lists">
          <div class="home_best_item">
            <div class="item_rank">1.</div>
            <div class="item_name">멍뭉카페</div>
            <div class="item_img"><img src="" alt="" /></div>
            <a href="/">바로가기</a>
          </div>
          <div class="home_best_item">
            <div class="item_rank">2.</div>
            <div class="item_name">멍비치</div>
            <div class="item_img"><img src="" alt="" /></div>
            <a href="/">바로가기</a>
          </div>
          <div class="home_best_item">
            <div class="item_rank">3.</div>
            <div class="item_name">멍펜션</div>
            <div class="item_img"><img src="" alt="" /></div>
            <a href="/">바로가기</a>
          </div>
        </div>
      </form>
      <div class="shift-btn">
        <button onclick="onClickRight()">&gt;</button>
      </div>
    </div>
  </div>
</div>

<script>
    const requestHomeLeft = new XMLHttpRequest();
  const onClickHomeLeft = () => {
    requestHomeLeft.open("POST", "/btn_left/", true);
    requestHomeLeft.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    requestHomeLeft.send(JSON.stringify({}));
  };

  requestHomeLeft.onreadystatechange = () => {
    if (requestHomeLeft.readyState === XMLHttpRequest.DONE) {
      if (requestHomeLeft.status <= 400) {
        let element = document.querySelector("#num"); 
        let count = Number(element.innerHTML) - 1; 
        
        if (count == -1) {
          count = 2
        }
        else {
          count %= 2
        }

        element.innerHTML = `${count}`;
        
        if (count == 0) {
          const locationSet = document.querySelector(".shift-locations");
          locationSet.innerHTML = `<div class="home_location"><a href="/cities/서울">서울</a></div>
          <div class="home_location"><a href="/cities/경기">경기</a></div>
          <div class="home_location"><a href="/cities/인천">인천</a></div>
          <div class="home_location"><a href="/cities/강원">강원</a></div>
          <div class="home_location"><a href="/cities/충북">충북</a></div>
          <div class="home_location"><a href="/cities/충남">충남</a></div>`
          const page = document.querySelector(".page_dot");
          page.innerHTML ='<img src="/static/img/page_1.svg" alt="">'
        }
        else if (count == 1) {
          const locationSet = document.querySelector(".shift-locations");
          locationSet.innerHTML = `<div class="home_location"><a href="/cities/대전">대전</a></div>
          <div class="home_location"><a href="/cities/경북">경북</a></div>
          <div class="home_location"><a href="/cities/경남">경남</a></div>
          <div class="home_location"><a href="/cities/대구">대구</a></div>
          <div class="home_location"><a href="/cities/울산">울산</a></div>
          <div class="home_location"><a href="/cities/부산">부산</a></div>`
          const page = document.querySelector(".page_dot");
          page.innerHTML ='<img src="/static/img/page_2.svg" alt="">'
        }
        else {
          const locationSet = document.querySelector(".shift-locations");
          locationSet.innerHTML = `<div class="home_location"><a href="/cities/광주">광주</a></div>
          <div class="home_location"><a href="/cities/전북">전북</a></div>
          <div class="home_location"><a href="/cities/전남">전남</a></div>
          <div class="home_location"><a href="/cities/제주">제주</a></div>`
          const page = document.querySelector(".page_dot");
          page.innerHTML ='<img src="/static/img/page_3.svg" alt="">'
        }
      }
    }
  };

  const requestHomeRight = new XMLHttpRequest();
  const onClickHomeRight = () => {
    requestHomeRight.open("POST", "/btn_right/", true);
    requestHomeRight.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    requestHomeRight.send(JSON.stringify({}));
  };

  requestHomeRight.onreadystatechange = () => {
    if (requestHomeRight.readyState === XMLHttpRequest.DONE) {
      if (requestHomeRight.status <= 400) {
        let element = document.querySelector("#num"); 
        let count = Number(element.innerHTML) + 1; 

        count %= 3
        
        element.innerHTML = `${count}`;

        if (count == 0) {
          const locationSet = document.querySelector(".shift-locations");
          locationSet.innerHTML = `<div class="home_location"><a href="/cities/서울">서울</a></div>
          <div class="home_location"><a href="/cities/경기">경기</a></div>
          <div class="home_location"><a href="/cities/인천">인천</a></div>
          <div class="home_location"><a href="/cities/강원">강원</a></div>
          <div class="home_location"><a href="/cities/충북">충북</a></div>
          <div class="home_location"><a href="/cities/충남">충남</a></div>`
          const page = document.querySelector(".page_dot");
          page.innerHTML ='<img src="/static/img/page_1.svg" alt="">'
        }
        else if (count == 1) {
          const locationSet = document.querySelector(".shift-locations");
          locationSet.innerHTML = `<div class="home_location"><a href="/cities/대전">대전</a></div>
          <div class="home_location"><a href="/cities/경북">경북</a></div>
          <div class="home_location"><a href="/cities/경남">경남</a></div>
          <div class="home_location"><a href="/cities/대구">대구</a></div>
          <div class="home_location"><a href="/cities/울산">울산</a></div>
          <div class="home_location"><a href="/cities/부산">부산</a></div>`
          const page = document.querySelector(".page_dot");
          page.innerHTML ='<img src="/static/img/page_2.svg" alt="">'
        }
        else {
          const locationSet = document.querySelector(".shift-locations");
          locationSet.innerHTML = `<div class="home_location"><a href="/cities/광주">광주</a></div>
          <div class="home_location"><a href="/cities/전북">전북</a></div>
          <div class="home_location"><a href="/cities/전남">전남</a></div>
          <div class="home_location"><a href="/cities/제주">제주</a></div>`
          const page = document.querySelector(".page_dot");
          page.innerHTML ='<img src="/static/img/page_3.svg" alt="">'
        }
      }
    }
  };
</script>
{% endblock %}
